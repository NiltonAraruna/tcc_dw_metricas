\chapter{Projeto de Estudo de Caso}

Neste capítulo será apresentada a estratégia de pesquisa adotada durante o trabalho, onde será descrito o protocolo para o estudo de caso que será realizado. Elementos de pesquisa como o problema a ser resolvido e quais são os objetivos a serem alcançados serão identificados e explicados. Também será apresentado o método para coleta dos dados e como eles serão analisados.


\section{Definição Sobre Estudo de Caso}

O estudo de caso é uma estratégia de pesquisa utilizada para investigar um tópico de maneira empírica através de um conjunto de procedimentos pré-especificados \cite{yin2001estudo}. Buscando diferenciar o estudo de caso de outras estratégias de pesquisa, \citeonline{yin2001estudo} esclarece que um estudo de caso deve focar em acontecimentos contemporâneos, não havendo assim exigência quanto ao controle sobre os eventos comportamentais. Dessa forma, o estudo de caso difere de um experimento pelo motivo que neste há controle e manipulação sobre as variáveis observadas, diferentemente do estudo de caso, que não os manipula. Em suma, a essência de qualquer estudo de caso reside em esclarecer uma decisão ou um conjunto de decisões, considerando o motivo pelo qual elas foram tomadas e qual os resultados das suas implementações \cite{schramm_notes_1971}. 

Uma vantagem dos estudos de caso encontra-se no fato deles serem mais fáceis de serem planejados, além de possuírem maior caráter realista. Porém, as desvantagens esbarram no fato dos resultados serem mais difíceis de ser generalizados, ou seja, é possível mostrar os efeitos de uma situação típica, porém é necessária maior análise para que se possa generalizar a outras situações \cite{wohlin2012experimentation}.


A estrutura do protocolo de estudo de caso proposta se baseia em \citeonline{case-study-template-2008} e se apresenta dividida nos seguintes tópicos, cada um com seu objetivo específico:

\begin{easylist}[itemize]

& \textbf{Background - Seção \ref{sec:Background}}: Identificar outros estudos acerca do tópico, definir a questão de pesquisa principal e suas proposições derivadas que serão abordado por este estudo.

& \textbf{Design - Seção \ref{sec:Design}}: Identificar se o projeto de pesquisa é um caso único ou múltiplo bem como seu propósito geral.

& \textbf{Seleção - Seção \ref{sec:Seleção}}: Apresentar critérios para a seleção do caso e letcdescrição do objeto de estudo a ser analisado.

& \textbf{Fonte e Método de Coleta de Dados - Seção \ref{sec:Fonte e Método de Coleta de Dados}}: Identificar os dados que serão coletados, definindo um plano para a coleta e como a informação será armazenada.

& \textbf{Processo de Análise dos Dados - Seção \ref{sec:Análise}}: Identificar os critérios para interpretação dos resultados do estudo de caso, relacionar os dados com a questão de pesquisa e elaborar a explicação do encontrado.

& \textbf{Ameaças a validade do estudo de caso - Seção \ref{sec:Validade}}: Elicitar tipos de validades aplicáveis a um estudo de caso baseando-se no trabalho desenvolvido por \citeonline{yin2001estudo}, sendo elas: constructo, interna, externa e confiabiliade.

& \textbf{Cronograma - Seção \ref{sec:Cronograma}}: Cronograma com as estimativas de tempo para as atividades propostas.

\end{easylist}


\section{Background}\label{sec:Background}

Esta seção contém referências sobre os trabalhos que antecederam esse estudo de caso dentro de um contexto similar ao que foi apresentado, assim como a própria questão geral de pesquisa a ser respondida com todos os elementos necessários para respondê-la.

\subsection{Trabalhos Antecedentes e Relacionados}

O principal trabalho que antecede essa ideia foi desenvolvido por \citeonline{rego_monitoramento_2014}, no qual a solução para monitoramento de métricas de código fonte utilizando \textit{Data Warehouse} foi desenvolvida.

Anteriormente ao trabalho realizado por \citeonline{rego_monitoramento_2014}, \citeonline{marinescu2005measurement} mostrou em seu trabalho que a utilização de métricas isoladas dificulta a interpretação de anomalias do código, reduzindo a aplicabilidade da medição feita. Além disso, o autor ainda afirma que a métrica por si só não contém informação o suficiente para motivar uma transformação no código que melhore sua qualidade. Buscando trabalhar nesse contexto, \citeonline{marinescu2005measurement} apresentou o conceito de interpretação das métricas em um nível de abstração maior que o adquirido ao observar apenas o valor da métrica.

Outro trabalho antecedente a ser destacado é a tese desenvolvida por \citeonline{Meirelles2013}, em que se buscou responder como métricas de código-fonte podem influir na atratividade de projetos de software livre e quais métricas devem ser controladas ao longo do tempo. Além disso, \citeonline{Meirelles2013} também inseriu como questão de pesquisa se as métricas de código-fonte melhoram com o amadurecimento dos projetos. Durante a execução de seu trabalho, foi observado a partir dos resultados obtidos para cada métrica de
código-fonte em uma análise realizada no código-fonte de trinta e oito projetos de software livre que, para uma determinada linguagem de programação, é possível definir um intervalo qualitativo a partir de um determinado percentil observando o conjunto de valores que são frequentemente observados.

O trabalho de \citeonline{Machini2010} fortemente relaciona-se com este trabalho por ter como objetivo fazer com que as métricas de código-fonte sejam mais facilmente incorporadas no cotidiano dos programadores, apresentando uma maneira de interpretar os valores das métricas através de cenários problemáticos que ocorrem frequentemente durante o desenvolvimento.  

Já o trabalho de \citeonline{Ruiz2005} apresenta um ambiente de \textit{data warehousing} para apoiar a implementação de um programa de medição em uma organização certificada como CMM Nível 2. Além disso foi concebido um experimento que valida sua arquitetura, onde foi usado dados organizacionais reais. \citeonline{Ruiz2005} aborda três aspectos essenciais: 

\begin{easylist}[itemize]

& A captura de dados, considerando os vários tipos de heterogeneidade.
& A integração, transformação e representação de dados quantitativos do projeto de acordo com a visão organizacional unificada e centralizada.
& A funcionalidade de análise que permite o monitoramento do processo.

\end{easylist}

\citeonline{novello_uma_2006} também utilizou \textit{data warehouse} para monitoramento de métricas no processo de desenvolvimento de software, porém essas métricas não eram de código fonte.

Outros trabalhos relacionados ao conceito de métricas de software utilizados nessa revisão são \citeonline{Fenton98}, \citeonline{Beck2007}, \citeonline{pandian_software_2004}, \citeonline{metricsandmodels} e \citeonline{McCabe76}. Outros trabalhos que possuem como tema \textit{data warehousing} foram utilizados durante a revisão bibliográfica, entre eles estão  \citeonline{Inmon2002}, \citeonline{Kimball2002}, \citeonline{chaudhuri1997} e \citeonline{hilmer2002}. 



\subsection{Questão de Pesquisa}

Toda pesquisa se inicia com algum tipo de problema, porém nem todo problema é passível de tratamento científico. Para que um problema seja de natureza científica ele deve estar envolvido a variáveis que podem ser testadas \cite{gil_como_2002}. Por causa disso, \citeonline{gil_como_2002} ainda define que todo problema deve ser empírico e suscetível de solução, além de ser delimitado a uma dimensão viável.

A questão de pesquisa deriva do problema identificado e busca definir o propósito da medição e o objeto que será medido, seja ele produto, processo ou recurso. Além disso, deve caracterizar o assunto a ser tratado e o ponto de vista que se delimita o escopo \cite{Basili96b} \cite{caldiera_goal_1994}.

Para atender a questão de pesquisa foi utilizado o mecanismo goal-question-metrics (GQM). O GQM combina em si muitas das técnicas de medição e as generaliza para incorporar processos, produtos ou recursos, o que torna seu uso adaptável a ambientes diferentes \cite{caldiera_goal_1994}. O GQM possui objetivos específicos para a questão de pesquisa, cada um contendo questões específicas que buscam responder através da coleta de métricas a questão geral de pesquisa e assim atender o problema do estudo de caso \cite{Basili96b}. A estrutura do estudo de caso englobando o GQM utilizado é apresentada da seguinte maneira:  

\begin{figure}[h!]
\centering
\includegraphics[keepaspectratio=false,scale=0.40]{figuras/figuras_matheus/projeto_de_pesquisa.eps}
\caption{Estrutura do estudo de caso}
\label{fig:pesquisa}
\end{figure}
\FloatBarrier

Aplicando o modelo estrutural adotado e levando em conta a análise do problema identificado na seção \ref{intro_problema} foi elaborada a seguinte questão de pesquisa:

\textbf{Questão de Pesquisa: \textit{O uso de um ambiente de Data Warehousing para aferição e monitoramento da qualidade interna do código-fonte é eficaz e eficiente do ponto de vista da equipe de qualidade, no contexto do desenvolvimento de projetos internos do TCU?}}

Os objetivos identificados para responder a questão geral de pesquisa, bem como suas questões específicas e as métricas levantadas para cada questão serão apresentadas a seguir.

\textbf{Objetivo 01:} Avaliar a eficácia e eficiência do uso de \textit{Data Warehouse} para monitoramento de métricas de código fonte. \newline

% Questão 01

\textbf{QE01:} Quantas tomadas de decisão foram realizadas pela equipe baseando-se no uso da solução desenvolvida em um período de tempo?

\textbf{Fonte:} Registro de observação em campo.

\textbf{Métrica:} Número de decisões tomadas/tempo. \newline

% Questão 02

\textbf{QE02: } Quantas tomadas de decisão ao todo foram realizadas pela equipe baseando-se no uso da solução desenvolvida?

\textbf{Fonte:} Registro de observação em campo.

\textbf{Métrica:} Número de decisões tomadas. \newline


% Questão 03

\textbf{QE03: } Qual a avaliação da equipe de qualidade quanto a detecção de cenários de limpeza de código?

\textbf{Fonte:} Questionário com equipe de qualidade.

\textbf{Métrica:} muito bom, bom, regular, ruim, muito ruim. \newline

% Questão 04

\textbf{QE04: } Com que frequência a equipe de qualidade encontra falhas relacionados à utilização da ferramenta em um determinado intervalo de tempo?

\textbf{Fonte:} Registro de observação em campo.

\textbf{Métrica:} Quantidade de falha / tempo (release, sprint).

\textbf{Interpretação da métrica:} Quanto mais próximo de zero melhor 0=<X \newline

% Questão 05

\textbf{QE05: } Qual a quantidade total de falhas encontradas pela equipe de qualidade relacionadas à utilização da ferramenta?

\textbf{Fonte:} Registro de observação em campo (áudio/vídeo).

\textbf{Métrica:} Quantidade de falhas. \newline

% Questão 06

\textbf{QE06: } Qual a proporção do uso da ferramenta para tomada de decisões?

\textbf{Fonte:} Questionário com equipe de qualidade.

\textbf{Métrica:} Número de decisões tomadas / número de vezes que a solução foi usada. \newline


% Questão 07

\textbf{QE07: } Qual a quantidade de cenários que foram corrigidos após utilização da solução?

\textbf{Fonte:} Código fonte.

\textbf{Métrica:} Números de cenários corrigidos / número de cenários encontrados. \newline

% Questão 08

\textbf{QE08: } Qual o nível de satisfação do uso da solução em comparação à solução anterior? 

\textbf{Fonte:} Equipe de qualidade.

\textbf{Métrica:} Muito satisfeito, Satisfeito, Neutro, Insatisfeito, Muito Insatisfeito. \newline

% Questão 09

\textbf{QE09: } Qual a taxa de oportunidade de melhoria de código em um intervalo de tempo (sprint, release)? 

\textbf{Fonte:} Código fonte.

\textbf{Métrica:} Taxa de oportunidade de melhoria de código: $$ T_r =   \frac{{\sum_{i=1}^{n}{Ce_i}}}{\sum_{i=1}^{n}{Cl_i}} $$ $ Ce $ é o total de cenários de limpezas identificados e $ Cl $  é o total de classes em um intervalo de tempo (sprint, release).

\textbf{Interpretação da métrica:} O intervalo qualitativo que definirá a interpretação desta será desenvolvido a partir de uma análise estatística a ser realizada na segunda parte desse trabalho, analisando valores coletados na aferição dessa métrica em projetos de software livre previamente selecionados para servirem de referência. 

\section{Design} \label{sec:Design}

\citeonline{stake_art_1995} identifica três modalidades de estudo de caso: intrínseco, instrumental e coletivo. Dentre essas definições, este estudo de caso se caracteriza como instrumental, pois se busca um entendimento geral sobre o problema de pesquisa a partir do estudo de um caso particular. Tal característica se assemelha ao tipo de estudo de caso definido como exploratório por \citeonline{yin2001estudo}, onde a visão acurada de um caso particular poderá fornecer uma visão geral do problema considerado.

A justificativa para este estudo de um caso particular se dá pelo motivo de que o tema abordado foi pouco explorado até o momento. Assim espera-se que este caso único componha um estudo de múltiplos casos, pois segundo \citeonline{gil_como_2002} esta abordagem pode inserir as evidências coletadas nesse trabalho em diferentes contextos, com o intuito de elaborar uma pesquisa de melhor qualidade.

\section{Seleção} \label{sec:Seleção}

A organização selecionada para este estudo de caso foi, o órgão público, Tribunal de Contas da União-TCU. Para aferir a qualidade de sistemas desenvolvidos internamente no TCU, ou seja, aquele que não é contratado, a equipe responsável pela qualidade estipulou valores para os indicadores das métricas exportadas pela ferramenta Sonar de acordo com pesquisas bibliográficas e pelo próprio consenso entre as equipes de desenvolvimento. Para tanto, essa equipe analisou tanto projetos desenvolvidos anteriores ao uso da prática de monitoramento e melhoria contínua da qualidade interna do código-fonte, quanto os projetos mais recentes, que passaram a fazer uso dessa prática no seu ciclo de desenvolvimento. A interpretação e visualização de dados extraídos da ferramenta  \textit{Sonar} são feitas por meio do \textit{plugin Total Quality}. Esse indicador é composto por diferentes tipos de medida/cálculos, sendo os resultados apresentados em um \textit{dashboard} que permite visualizar os valores para as métricas de diferentes formas, entre elas destacam-se rankings e acompanhamento histórico. Cabe ressaltar que, a prática de monitoramento da qualidade do código-fonte no TCU ainda não pode ser considerada institucionalizada, uma vez que, esta prática não é realizada de forma sistemática por todas as equipe de desenvolvimento interno do referido órgão.
As dificuldades encontradas pelas equipes de desenvolvimento no TCU estão concentradas no fato de não haver consenso em relação a atualização dos indicadores das métricas. Além disso, após atualizações na ferramenta de análise estática \textit{Sonar}, algumas métricas deixaram de ser medidas, o que tem causado inconsistências na apresentação dos dados relacionados à qualidade do código fonte no \textit{dashboard}.

Portanto, a seleção justifica-se pelo fato do TCU possuir um ambiente onde o estudo da eficácia e eficiência da solução de \textit{data warehousing} pode complementar o monitoramento de métricas de código-fonte já realizado no local.



\section{Fonte dos Dados Coletados e Método de Coleta} \label{sec:Fonte e Método de Coleta de Dados}

Neste estudo de caso, os dados serão coletados através de registros de observações em campo, questionários e resultados gerados pela própria solução a ser investigada, após análise direta do código fonte.

Os registros oriundos de observações em campo são coletados durante encontros realizados no próprio TCU com a equipe responsável pela tomada de decisões de qualidade de código fonte. Nesses encontros, a solução proposta será utilizada e qualquer atitude relacionada ao seu uso pela equipe será registrado para analises posteriores.

A adoção de questionários foi utilizada tanto para dados qualitativos quanto para dados quantitativos. Um exemplo disso é a questão específica 06, em que se busca saber a proporção de decisões tomadas influenciadas pela solução via questionário com a empresa. O uso de questionário na questão 06 é quantitativo, enquanto na questão 08 é feito um questionário para saber o nível de satisfação da empresa quanto ao uso da solução, sendo esse um tipo de dado qualitativo.

Dados resultantes da própria solução em análise, como gráficos automaticamente gerados, serão coletados a medida que a ferramenta for utilizada ao longo do tempo.

\section{Processo de Análise dos Dados} \label{sec:Análise}

Análise dos dados coletados durante o estudo de caso a ser realizado no TCU será realizado através de 4 etapas:

\begin{easylist}[itemize]	
	
	& \textbf{Categorização: } Organização dos dados em duas categorias - qualitativos e quantitativos. Os 		dados qualitativos referem-se aos questionários realizados. Os dados quantitativos, por sua vez, 			referem-se aos valores numéricos da solução de DW para monitoramento de métricas. 
	& \textbf{Exibição: } Consiste na organização dos dados coletados para serem exibidos através de 				gráficos, tabelas e texto para poderem ser analisados. 
	& \textbf{Verificação: } Atestar padrões, tendências e aspectos específicos dos significados dos 				dados. Procurando assim gerar uma discussão e interpretação de cada dado exibido.
	& \textbf{Conclusão: } Agrupamento dos resultados mais relevantes das discussões e interpretações dos 			dados anteriormente apresentados.
	
	\end{easylist}

\section{Ameaças a Validade do Estudo de Caso} \label{sec:Validade}

\citeonline{yin2001estudo} descreve como principais ameaças relacionadas à validade do estudo de caso as ameaças relacionadas à validade do constructo, à validade interna, à validade externa e à confiabilidade. As quatro ameaças definidas por ele, bem como a forma usada nesse trabalho para preveni-las, são descritas da seguinte maneira: 

\begin{easylist}[itemize]	


& \textbf{Validade do constructo: } A validade de construção está presente na fase de coleta de dados, quando deve ser evidenciado as múltiplas fontes de evidência e a coleta de um conjunto de métricas para que se possa saber exatamente o que medir e quais dados são relevantes para o estudo, de forma a responder as questões de pesquisa \cite{yin2001estudo}. O uso do GQM mitiga a validade de constructo, uma vez que estabelece uma lógica entre a questão de pesquisa e as métricas que serão analisadas para respondê-la.

& \textbf{Validade interna: } Para \citeonline{yin2001estudo} o uso de várias fontes de dados e métodos de coleta permite a triangulação, uma técnica para confirmar se os resultados de diversas fontes e de diversos métodos convergem. Dessa forma é possível aumentar a validade interna do estudo e aumentar a força das conclusões.
A triangulação de dados se dará pelos medidas extraídas do código-fonte por meio da solução de \textit{DWing} (explicada no capítulo \ref{chap:arquitetura} ), pela análise de questionários e pelos dados coletados através de entrevistas com as equipes de desenvolvimento de de qualidade do órgão.

& \textbf{Validade externa: } \citeonline{yin2001estudo} recomenda a replicação do estudo em múltiplos casos, por este ser um caso único, a generalização não poderá ser alcançada. Este trabalho é o primeiro a verificar a eficácia e eficiência da solução para o estudo de caso no TCU, portanto não há como correlacionar os resultados obtidos a nenhum outro estudo.


& \textbf{Confiabilidade: } Com relação a confiabilidade, \citeonline{yin2001estudo} associa à repetibilidade, desde que seja usada a mesma fonte de dados. Nesse trabalho o protocolo de estudo de caso, além da base de dados coletados permitirá a repetibilidade deste estudo e consequentemente alcançará validade relacionada à confiabilidade.

\end{easylist}	

\section{Cronograma}\label{sec:Cronograma}


As atividades listadas no cronograma abaixo servirão de apoio para a execução do estudo de caso:


	\begin{table}[!ht]
	\begin{center}
	
	\input{tabelas/tabelasMatheus/cronograma.ltx} 
	\caption{Cronograma do Estudo de Caso}
	\label{tab:cronograma}
	\end{center}
	\end{table}	
	\FloatBarrier	

\section{Considerações Finais do Capítulo} 

Esse capítulo teve como objetivo apresentar o protocolo de estudo de caso que será adotado na continuação desse trabalho. A coleta e análise dos dados coletados seguindo esse protocolo ocorrerão no próximo semestre próximo semestre.

\label{estudo de caso}

